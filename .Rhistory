config$gas_order
tar_load(gas_dataset)
View(gas_dataset)
tar_make(config)
tar_make(config)
tar_make(gas_breakout_df)
tar_load(c(projections_all_sm,config))
years_sum <- projections_all_sm %>% filter(year %in% config$table)
gas_dataset <- years_sum %>%
group_by(proj_name, gas, year) %>%
summarise(mmtco2e = sum(sum))
category_order <- config$gas_order
tar_load(lulucf_sink_breakout)
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
rm(config)
tar_make(gas_breakout_df)
tar_load(config)
config$gas_order
rm(value)
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
rm(category_order)
category_order <- config$gas_order
category_order
rm(value)
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
rm(lulucf_sink_breakout)
tar_load(lulucf_breakout)
tar_load(lulucf_breakout_df)
tar_load(lulucf_sink_breakout)
View(lulucf_sink_breakout)
View(projections_all_sm)
lulucf_sink_df <- projections_all_sm %>% ungroup() %>%
select(proj_name,gas,year,sum) %>%
filter(gas=='LULUCF Sink') %>%
filter(year %in% config$table)
years_lulucf_sink <- as.character(unique(lulucf_sink_df$year))
lulucf_sink_hist <- lulucf_sink_df %>% filter(year <= config$base_year)
years_lulucf_sink_hist <- as.character(unique(lulucf_sink_hist$year))
ghgi_subset <-
lulucf_sink_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
lulucf_sink_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
View(projections_all_sm)
proj_sm_wide <- projections_all_sm %>% select(gas,year,sum) %>% pivot_wider(year)
proj_sm_wide <- projections_all_sm %>% select(gas,year,sum) %>% pivot_wider(name = year)
proj_sm_wide <- projections_all_sm %>% select(gas,year,sum) %>% pivot_wider(names_from = year,
values_from = sum)
View(proj_sm_wide)
proj_sm_wide <- projections_all_sm %>% select(gas,year,sum)
proj_sm_wide <- projections_all_sm %>% ungroup() %>%  select(gas,year,sum) %>% pivot_wider(names_from = year,
values_from = sum)
View(proj_sm_wide)
proj_sm_wide <- projections_all_sm %>% ungroup()
View(proj_sm_wide)
proj_sm_wide <- projections_all_sm %>% ungroup() %>%  select(gas,year,sum)
View(proj_sm_wide)
proj_sm_wide <- projections_all_sm %>% ungroup() %>%  select(gas,year,sum) %>% pivot_wider(names_from = 'year',
values_from = 'sum')
View(proj_sm_wide)
proj_sm_wide <- projections_all_sm %>% ungroup() %>%  select(gas,year,sum) %>% filter(year %in% config$table) %>% pivot_wider(names_from = 'year',
values_from = 'sum')
View(proj_sm_wide)
lulucf_sink_df <- projections_all_sm %>% ungroup() %>%
select(proj_name,gas,year,sum) %>%
filter(gas=='LULUCF Sink') %>%
filter(year %in% config$table)
years_lulucf_sink <- as.character(unique(lulucf_sink_df$year))
lulucf_sink_hist <- lulucf_sink_df %>% filter(year <= config$base_year)
years_lulucf_sink_hist <- as.character(unique(lulucf_sink_hist$year))
ghgi_subset <-
lulucf_sink_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
lulucf_sink_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = sum) %>% ungroup() %>% select(years_lulucf_sink_hist)
proj_sm_wide <- projections_all_sm %>% ungroup() %>%  select(gas,year,sum) %>% filter(year %in% config$table) %>% pivot_wider(names_from = 'year',
values_from = 'sum')
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = sum)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas, years_lulucf_sink)
cols_proj_sm <- colnames(proj_sm_wide)
missing_cols <- setdiff(cols_proj_sm, colnames(value_df))
value_df[missing_cols] <- NA
value_df <- value_df[, cols_proj_sm]
View(value_df)
tar_make(gas_breakout_df)
tar_load(lulucf_sink_breaktout)
tar_load(lulucf_sink_breakout)
View(lulucf_sink_breakout)
tar_load(gas_dataset)
View(gas_dataset)
View(lulucf_sink_breakout)
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
tar_load(config)
category_order <- config$gas_order
gas_order
category_order
category_order <- category_order[1:7]
category_order
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
breakout_df <- bind_rows(processed_dfs)
gas_table_df <- breakout_df %>% rbind(lulucf_sink_breakout)
View(gas_table_df)
View(lulucf_sink_breakout)
tar_load(projections_all_sm)
proj_sm_wide <- projections_all_sm %>% ungroup() %>% group_by(proj_name) %>%  select(gas,year,sum) %>% filter(year %in% config$table) %>% pivot_wider(names_from = 'year',
values_from = 'sum')
View(proj_sm_wide)
lulucf_sink_df <- projections_all_sm %>% ungroup() %>%
select(proj_name,gas,year,sum) %>%
filter(gas=='LULUCF Sink') %>%
filter(year %in% config$table)
years_lulucf_sink <- as.character(unique(lulucf_sink_df$year))
lulucf_sink_hist <- lulucf_sink_df %>% filter(year <= config$base_year)
years_lulucf_sink_hist <- as.character(unique(lulucf_sink_hist$year))
ghgi_subset <-
lulucf_sink_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
lulucf_sink_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = sum) %>% ungroup() %>% select(years_lulucf_sink_hist)
proj_sm_wide <- projections_all_sm %>% ungroup() %>% group_by(proj_name) %>%  select(gas,year,sum) %>% filter(year %in% config$table) %>% pivot_wider(names_from = 'year',
values_from = 'sum')
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = sum)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas, years_lulucf_sink)
View(value_df)
cols_proj_sm <- colnames(proj_sm_wide)
missing_cols <- setdiff(cols_proj_sm, colnames(value_df))
value_df[missing_cols] <- NA
value_df <- value_df[, cols_proj_sm]
View(value_df)
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
breakout_df <- bind_rows(processed_dfs)
gas_table_df <- breakout_df %>% rbind(lulucf_sink_breakout)
View(gas_table_df)
tar_make(gas_breakout_df)
tar_load(c(config, projections_all_sm))
years_sum <- projections_all_sm %>% filter(year %in% config$table)
gas_dataset <- years_sum %>%
group_by(proj_name, gas, year) %>%
summarise(mmtco2e = sum(sum))
View(gas_dataset)
tar_load(lulucf_sink_breakout)
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
category_order <- config$gas_order
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
breakout_df <- bind_rows(processed_dfs)
gas_table_df <- breakout_df %>% rbind(lulucf_sink_breakout)
tar_load(c(projections_all_sm, config))
lulucf_sink_df <- projections_all_sm %>% ungroup() %>%
select(proj_name,gas,year,sum) %>%
filter(gas=='LULUCF Sink') %>%
filter(year %in% config$table)
lulucf_sink_df <- projections_all_sm %>% ungroup() %>%
select(proj_name,gas,year,sum) %>%
filter(gas=='LULUCF Sink') %>%
filter(year %in% config$table)
View(lulucf_sink_df)
years_lulucf_sink <- as.character(unique(lulucf_sink_df$year))
lulucf_sink_hist <- lulucf_sink_df %>% filter(year <= config$base_year)
years_lulucf_sink_hist <- as.character(unique(lulucf_sink_hist$year))
ghgi_subset <-
lulucf_sink_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
lulucf_sink_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = sum) %>% ungroup() %>% select(years_lulucf_sink_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = sum)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas, years_lulucf_sink)
View(value_df)
lulucf_sink_breakout_df <- value_df
years_sum <- projections_all_sm %>% filter(year %in% config$table)
gas_dataset <- years_sum %>%
group_by(proj_name, gas, year) %>%
summarise(mmtco2e = sum(sum))
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
category_order <- config$gas_order
for(value in category_order) {
subset_df <- gas_dataset %>% filter(gas == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, gas,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
breakout_df <- bind_rows(processed_dfs)
gas_table_df <- breakout_df %>% rbind(lulucf_sink_breakout_df)
View(gas_table_df)
tar_invalidate(everything())
tar_make()
tar_load(c(projections_all_sm, config))
years_sum <- projections_all_sm %>% filter(year %in% config$table)
sector_dataset <- years_sum %>% group_by(proj_name, usproj_sector, year) %>% summarise(mmtco2e = sum(sum))
category_order <- config$sector_order
tar_load(lulucf_sink_breakout_df)
processed_dfs <- list()
years_proj <- as.character(config$table[config$table > config$base_year])
years_hist <- as.character(config$table[config$table <= config$base_year])
for(value in category_order) {
subset_df <- sector_dataset %>% filter(usproj_sector == value)
ghgi_subset <-
subset_df %>% filter(proj_name == 'ghgi') %>% filter(year <= config$base_year)
proj_subset <-
subset_df %>% filter(!proj_name == 'ghgi') %>% filter(year > config$base_year)
ghgi_subset_wide <- ghgi_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e) %>% ungroup() %>% select(years_hist)
proj_subset_wide <-
proj_subset %>% pivot_wider(names_from = year,
values_from = mmtco2e)
ghgi_subset_wide_rep <-
do.call('rbind', replicate(nrow(proj_subset_wide), ghgi_subset_wide, simplify =
FALSE))
value_df <- cbind(proj_subset_wide, ghgi_subset_wide_rep) %>% select(proj_name, usproj_sector,   as.character(config$table))
processed_dfs[[value]] <- value_df
}
breakout_df <- bind_rows(processed_dfs)
usproj_sector_table_df <- breakout_df %>% rbind(lulucf_sink_breakout_df)
View(usproj_sector_table_df)
View(lulucf_sink_breakout_df)
lulucf_sink_breakout_df <- lulucf_sink_breakout_df %>% rename(usproj_sector = gas)
usproj_sector_table_df <- breakout_df %>% rbind(lulucf_sink_breakout_df)
View(usproj_sector_table_df)
tar_make()
years_sum <- projections_all_sm %>% filter(year %in% config$table)
sector_dataset <- years_sum %>% group_by(proj_name, usproj_sector, year) %>% summarise(mmtco2e = sum(sum))
tar_destroy()
tar_make()
tar_make()
tar_make()
tar_load(gas_breakout)
tar_load(lulucf_sink_breakout)
cols_gas_breakout <- colnames(gas_breakout)
missing_cols <- setdiff(cols_gas_breakout, colnames(lulucf_sink_breakout))
lulucf_sink_breakout[missing_cols] <- NA
lulucf_sink_breakout <- lulucf_sink_breakout[, cols_gas_breakout]
combined_df <- bind_rows(gas_breakout, lulucf_sink_breakout)
tne_df <- summarise_emissions(combined_df)%>%
mutate(source = 'Total Net Emissions') %>%
select(proj_name,source, everything())
tne_df <- gen_total_gross_emissions(combined_df)%>%
mutate(source = 'Total Net Emissions') %>%
select(proj_name,source, everything())
gen_total_gross_emissions <- function(gas_breakout_df){
summarized_df <- gas_breakout_df %>% group_by(proj_name) %>%
summarise(across(where(is.numeric), sum, na.rm=TRUE)) %>%
mutate(source = 'Total Gross Emissions') %>%
select(proj_name,source, everything())
}
tne_df <- gen_total_gross_emissions(combined_df)%>%
mutate(source = 'Total Net Emissions') %>%
select(proj_name,source, everything())
tar_make()
View(tne_df)
View(tne_df)
tar_load(gas_breakout)
View(gas_breakout)
tar_load(total_gross_emissions)
tar_load(total_net_emissions)
View(total_net_emissions)
View(total_gross_emissions)
tne_long <- total_net_emissions %>% pivot_longer(cols = as.character(config$table),
names_to = 'year',
values_to = 'value') %>% select(proj_name,year,value)
tar_load(config)
View(total_net_emissions)
tne_long <- total_net_emissions %>% pivot_longer(cols = as.character(config$table),
names_to = 'year',
values_to = 'value') %>% select(proj_name,year,value)
View(tne_long)
View(total_net_emissions)
tne <- total_net_emissions %>% select(!source)
View(tne)
tne_long <- tne %>% pivot_longer(cols = as.character(config$table),
names_to = 'year',
values_to = 'value')
View(tne_long)
View(gas_breakout)
tar_visnetwork(targets_only = TRUE)
tar_load(gas_dataset)
View(gas_dataset)
tar_load(proj_all_sm)
tar_load(projections_all_sm)
View(projections_all_sm)
View(projections_all_sm %>% filter(year == 20202))
View(projections_all_sm %>% filter(year == 2020))
tar_load(usproj_all)
View(usproj_all)
View(usproj_all %>% filter(year==2020))
View(usproj_all %>% filter(year==2025))
tar_load(add_hist_data)
View(add_hist_data)
View(usproj_all)
tar_load(projections_all)
View(projections_all)
historical <- usproj_all %>% filter(region == 'United States') %>% filter(year <= config$base_year)
historical_ghgi <- historical %>% mutate(proj_name = 'ghgi') %>%
mutate(model = 'ghgi') %>%
mutate(scenario = 'historical') %>%
select(names(projections_all))
projections_all <- projections_all %>% rbind(historical_ghgi)
add_hist_data <- projections_all
View(add_hist_data)
hist_2020 <- add_hist_data %>% filter(year==2020)
View(hist_2020)
View(usproj_all)
View(projections_all_sm)
View(projections_all_sm)
View(projections_all_sm %>% filter(gas =='CO2')%>% filter(year ==2020)%>% filter(usproj_sector =='Energy'))
View(historical%>% filter(gas =='CO2')%>% filter(year ==2020)%>% filter(usproj_sector =='Energy'))
projections_all_sm <- add_hist_data %>%
group_by(proj_name, gas, usproj_sector, year) %>%
summarise(sum = sum(value))
View(projections_all_sm)
projections_all_sm <- add_hist_data %>%
group_by(proj_name, gas, usproj_sector,unit, year) %>%
summarise(sum = sum(value))
View(gas_dataset)
years_sum <- projections_all_sm %>% filter(year %in% config$table)
View(years_sum)
View(projections_all_sm)
projections_all_sm <- add_hist_data %>%
group_by(proj_name, gas, usproj_sector,unit, year) %>%
summarise(sum = sum(value))
View(projections_all_sm)
View(historical)
View(historical_ghgi)
View(add_hist_data)
View(hist_2020)
hist_2020_dist <- hist_2020 %>% distinct()
View(hist_2020_dist)
projections_all_sm <- add_hist_data %>%
group_by(proj_name, gas, usproj_sector,unit, year) %>%
summarise(sum = sum(value)) %>% distinct()
projections_all_sm <- add_hist_data%>% distinct() %>%
group_by(proj_name, gas, usproj_sector,unit, year) %>%
summarise(sum = sum(value))
projections_all_sm <- add_hist_data%>% distinct() %>%
group_by(proj_name, gas, usproj_sector,unit, year) %>%
summarise(sum = sum(value))
years_sum <- projections_all_sm %>% filter(year %in% config$table)
gas_dataset <- years_sum %>%
group_by(proj_name, gas, year) %>%
summarise(mmtco2e = sum(sum))
View(gas_dataset)
usproj_all <- usproj_all %>% distinct()
View(usproj_all)
historical <- usproj_all %>% filter(region == 'United States') %>% filter(year <= config$base_year)
historical_ghgi <- historical %>% mutate(proj_name = 'ghgi') %>%
mutate(model = 'ghgi') %>%
mutate(scenario = 'historical')
View(historical_ghgi)
tar_load(crosswalk_compilation)
View(crosswalk_compilation)
View(usproj_all)
usproj_2020 <- usproj_all %>% filter(year==2020)
View(usproj_2020)
View(usproj_2020 %>% group_by(model,scenario,usproj_sector,gas,unit,usproj_source)) %>% summarise(sum = sum(value))
usproj_2020_sum <- usproj_2020 %>% group_by(model,scenario,usproj_sector,gas,unit,usproj_source)) %>% summarise(sum = sum(value)
usproj_2020_sum <- usproj_2020 %>% group_by(model,scenario,usproj_sector,gas,unit,usproj_source) %>% summarise(sum = sum(value)
usproj_2020_sum <- usproj_2020 %>% group_by(model,scenario,usproj_sector,gas,unit,usproj_source) %>% summarise(sum = sum(value))
View(usproj_2020_sum)
